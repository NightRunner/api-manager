<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>param</title>
    <link href="../res/bootstrap-4.0.0/css/bootstrap.css" rel="stylesheet"></link>
    <script src="../res/js/jquery-3.3.1.min.js"></script>
    <script src="../res/bootstrap-4.0.0/js/bootstrap.min.js"></script>
    <script src="js/namespace.js"></script>
    <script src="js/util.js"></script>
    <script src="js/jquery.chosen.js"></script>
    <script src="js/jquery.param.js"></script>
</head>
<body>
<div id="param"></div>
<button id="showDataBtn" class="btn btn-info">转化数据</button>
<script>
    var options = {
        container: '#param',
        headers: [
            {text: '操作', width: '5%'},
            {text: '名称', width: '15%'},
            {text: '含义', width: '20%'},
            {text: '类型', width: '20%'},
            {text: 'Mock规则', width: '20%'},
            {text: '默认值', width: '20%'}
        ],
        fields: [
            {name: 'name', type: 'input'},
            {name: 'desc', type: 'input'},
            {
                name: 'type', type: 'select', options: {
                    width: '100%',
                    height: '100%',
                    optionField: {value: 'k', text: 'v'},
                    url: '/apimanager/meta/findMeta',
                    params: {metaId: 1}
                }
            },
            {name: 'rule', type: 'input'},
            {name: 'defaultVal', type: 'input'}
        ],
        footBtn: [
            {
                type: 'add', text: '添加参数', fn: function (row) {
                }
            }
        ],
        data: JSON.parse('[{"name":"id","desc":"设备编号","type":"1","rule":"1-10","defaultVal":"1"},{"name":"firstImg","desc":"设备图片","type":"4","rule":"","defaultVal":"","child":[{"name":"mid","desc":"中图","type":"2","rule":"","defaultVal":"http://mid/img.jpg"},{"name":"big","desc":"大图","type":"2","rule":"","defaultVal":"http://big/img.jpg"}]}]')
    };
    var param = api.ui.param(options);
    $('#showDataBtn').on('click', function () {
        console.log(param.toData());
    });
</script>
</body>
</html>